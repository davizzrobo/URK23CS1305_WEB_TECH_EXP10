"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[37],{9037:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(5043),n=a(5016),c=a(4570),l=a(4505),i=a(2145),r=a(579);const d=(0,t.lazy)(()=>Promise.all([a.e(58),a.e(464)]).then(a.bind(a,9464))),o=()=>{const{user:e}=(0,n.A)(),{refreshProgress:s}=(0,c.w)(),[a,o]=(0,t.useState)(null),[h,m]=(0,t.useState)([]),[x,g]=(0,t.useState)(!0),[v,u]=(0,t.useState)("current-month"),[j,N]=(0,t.useState)((new Date).getMonth()+1),[p,y]=(0,t.useState)((new Date).getFullYear());(0,t.useEffect)(()=>{b()},[v,j,p]);const b=async()=>{try{const a=(await l.FU.getAll()).data;if(m(a.slice(0,5)),s&&s(),"all-time"===v){const s=a.filter(e=>"income"===e.type).reduce((e,s)=>e+s.amount,0),t=a.filter(e=>"expense"===e.type).reduce((e,s)=>e+s.amount,0),n=s-t,c={};a.filter(e=>"expense"===e.type).forEach(e=>{c[e.category]=(c[e.category]||0)+e.amount});const l=(null===e||void 0===e?void 0:e.allTimeGoal)||2e4,i=n,r=s>0?i/s*100:0,d=[];i>=l?d.push("Excellent! You saved \u20b9".concat(i.toFixed(2),", exceeding your goal by \u20b9").concat((i-l).toFixed(2))):i>0?d.push("You saved \u20b9".concat(i.toFixed(2)," (").concat(r.toFixed(2),"% of income)")):i<0&&d.push("Warning: You spent \u20b9".concat(Math.abs(i).toFixed(2)," more than you earned"));const h=Object.entries(c).sort((e,s)=>s[1]-e[1])[0];h&&d.push("Your highest expense category is ".concat(h[0]," (\u20b9").concat(h[1].toFixed(2),")")),o({period:{display:"All Time"},summary:{totalIncome:s,totalExpenses:t,balance:n,savingsGoal:l,savings:i,savingsPercentage:r},categoryBreakdown:c,insights:d,transactionCount:{income:a.filter(e=>"income"===e.type).length,expense:a.filter(e=>"expense"===e.type).length,total:a.length}})}else{const e=await l.Pt.getSummary({month:j,year:p});o(e.data)}}catch(a){i.oR.error("Failed to load dashboard data"),console.error(a)}finally{g(!1)}};if(x)return(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("div",{className:"spinner"})});if(!a)return(0,r.jsx)("div",{className:"container",children:"No data available"});const{totalIncome:f,totalExpenses:F,balance:w,savingsGoal:S,savings:k,savingsPercentage:A}=a.summary,{categoryBreakdown:C,insights:E}=a,I=Number(f)||0,T=Number(F)||0,P=Number(w)||0,Y=Number(S)||2e4,B=Number(k)||0,D=Number(A)||0,G=Y>0?B/Y*100:0;return(0,r.jsxs)("div",{className:"dashboard",children:[(0,r.jsxs)("div",{className:"dashboard-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["Welcome back, ",null===e||void 0===e?void 0:e.name,"! \ud83d\udc4b"]}),(0,r.jsx)("p",{children:"Here's your financial overview"})]}),(0,r.jsxs)("div",{className:"header-controls",children:[(0,r.jsxs)("div",{className:"view-toggle",children:[(0,r.jsx)("button",{className:"toggle-btn ".concat("current-month"===v?"active":""),onClick:()=>u("current-month"),children:"\ud83d\udcc5 This Month"}),(0,r.jsx)("button",{className:"toggle-btn ".concat("all-time"===v?"active":""),onClick:()=>u("all-time"),children:"\ud83c\udf0d All Time"})]}),"current-month"===v&&(0,r.jsxs)("div",{className:"month-selector",children:[(0,r.jsx)("select",{value:j,onChange:e=>N(parseInt(e.target.value)),className:"month-select",children:Array.from({length:12},(e,s)=>(0,r.jsx)("option",{value:s+1,children:new Date(2e3,s,1).toLocaleString("default",{month:"short"})},s+1))}),(0,r.jsx)("select",{value:p,onChange:e=>y(parseInt(e.target.value)),className:"year-select",children:Array.from({length:5},(e,s)=>{const a=(new Date).getFullYear()-s;return(0,r.jsx)("option",{value:a,children:a},a)})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-4 mb-4",children:[(0,r.jsxs)("div",{className:"stat-card income",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Total Income"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",I.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card expense",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb8"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Total Expenses"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",T.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card balance",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb5"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Balance"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",P.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card goal",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Savings Goal"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",Y.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"Savings Progress"}),(0,r.jsxs)("div",{className:"budget-progress",children:[(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-fill ".concat(G>=100?"good-savings":G<10?"low-savings":""),style:{width:"".concat(Math.min(G,100),"%")}})}),(0,r.jsxs)("div",{className:"progress-info",children:[(0,r.jsxs)("span",{children:[G.toFixed(1),"% of goal achieved"]}),(0,r.jsxs)("span",{children:["\u20b9",B.toFixed(2)," saved / \u20b9",Y.toFixed(2)," goal"]})]}),(0,r.jsx)("div",{className:"progress-info",style:{marginTop:"8px",fontSize:"14px",color:"#666"},children:(0,r.jsxs)("span",{children:["\ud83d\udca1 Savings rate: ",D.toFixed(2),"% of income"]})})]})]}),E.length>0&&(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"\ud83d\udca1 Insights"}),(0,r.jsx)("ul",{className:"insights-list",children:E.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),(0,r.jsx)(t.Suspense,{fallback:(0,r.jsxs)("div",{className:"grid grid-2 mb-4",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Category Breakdown"}),(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Income vs Expenses"}),(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]})]}),children:(0,r.jsx)(d,{categoryBreakdown:C,totalIncome:f,totalExpenses:F})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Recent Transactions"}),h.length>0?(0,r.jsx)("div",{className:"transactions-list",children:h.map(e=>(0,r.jsxs)("div",{className:"transaction-item",children:[(0,r.jsx)("div",{className:"transaction-icon",children:"income"===e.type?"\ud83d\udcb0":"\ud83d\udcb8"}),(0,r.jsxs)("div",{className:"transaction-details",children:[(0,r.jsx)("p",{className:"transaction-category",children:e.category}),(0,r.jsx)("p",{className:"transaction-note",children:e.note||"No description"})]}),(0,r.jsxs)("div",{className:"transaction-amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]})]},e._id))}):(0,r.jsx)("p",{className:"text-center",children:"No transactions yet"})]})]})}}}]);
//# sourceMappingURL=37.46d535c6.chunk.js.map