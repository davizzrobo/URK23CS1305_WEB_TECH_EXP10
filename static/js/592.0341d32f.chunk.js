"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[592],{6592:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var l=a(9379),i=a(5043),n=a(3216),t=a(5016),r=a(4570),o=a(3005),c=a(4505),d=a(2145),m=a(579);const u=()=>{const{user:e,updateUser:s,logout:a}=(0,t.A)(),{refreshProgress:u}=(0,r.w)(),{setTheme:h}=(0,o.D)(),p=(0,n.Zp)(),[g,f]=(0,i.useState)({name:(null===e||void 0===e?void 0:e.name)||"",profilePic:(null===e||void 0===e?void 0:e.profilePic)||""}),[v,x]=(0,i.useState)(!(null!==e&&void 0!==e&&e.profilePic)||(null===e||void 0===e?void 0:e.profilePic.includes("ui-avatars.com"))),[j,N]=(0,i.useState)((null===e||void 0===e?void 0:e.savingsGoal)||5e3),[y,b]=(0,i.useState)((null===e||void 0===e?void 0:e.allTimeGoal)||2e4),[A,P]=(0,i.useState)({assistantPersonality:(null===e||void 0===e?void 0:e.assistantPersonality)||"cheerful",theme:(null===e||void 0===e?void 0:e.theme)||"light"}),[w,R]=(0,i.useState)({profile:!1,savings:!1,settings:!1});(0,i.useEffect)(()=>{e&&(f({name:e.name||"",profilePic:e.profilePic||""}),x(!e.profilePic||e.profilePic.includes("ui-avatars.com")),N(e.savingsGoal||5e3),b(e.allTimeGoal||2e4),P({assistantPersonality:e.assistantPersonality||"cheerful",theme:e.theme||"light"}))},[e]);return(0,m.jsxs)("div",{className:"settings-page",children:[(0,m.jsxs)("div",{className:"page-header",children:[(0,m.jsx)("h1",{children:"Settings"}),(0,m.jsx)("p",{children:"Manage your profile and app preferences"})]}),(0,m.jsxs)("div",{className:"settings-grid",children:[(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("h2",{className:"section-title",children:"\ud83d\udc64 Profile Information"}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),R((0,l.A)((0,l.A)({},w),{},{profile:!0}));try{const e=(0,l.A)((0,l.A)({},g),{},{profilePic:v?"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(g.name),"&background=random&size=200"):g.profilePic}),a=await c.Eo.updateProfile(e);s(a.data.user),d.oR.success("Profile updated successfully")}catch(a){d.oR.error("Failed to update profile"),console.error(a)}finally{R((0,l.A)((0,l.A)({},w),{},{profile:!1}))}},children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Full Name"}),(0,m.jsx)("input",{type:"text",value:g.name,onChange:e=>f((0,l.A)((0,l.A)({},g),{},{name:e.target.value})),className:"form-control",required:!0})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Email"}),(0,m.jsx)("input",{type:"email",value:null===e||void 0===e?void 0:e.email,className:"form-control",disabled:!0}),(0,m.jsx)("small",{className:"form-text",children:"Email cannot be changed"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Profile Picture"}),(0,m.jsxs)("div",{className:"avatar-options",children:[(0,m.jsxs)("label",{className:"radio-option",children:[(0,m.jsx)("input",{type:"radio",name:"avatarType",checked:v,onChange:()=>x(!0)}),(0,m.jsx)("span",{children:"Use name initials (auto-generated)"})]}),(0,m.jsxs)("label",{className:"radio-option",children:[(0,m.jsx)("input",{type:"radio",name:"avatarType",checked:!v,onChange:()=>x(!1)}),(0,m.jsx)("span",{children:"Use custom image URL"})]})]})]}),!v&&(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Profile Picture URL"}),(0,m.jsx)("input",{type:"url",value:g.profilePic,onChange:e=>f((0,l.A)((0,l.A)({},g),{},{profilePic:e.target.value})),className:"form-control",placeholder:"https://example.com/avatar.jpg"})]}),(0,m.jsxs)("div",{className:"profile-preview",children:[(0,m.jsx)("img",{src:v?"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(g.name||"User"),"&background=random&size=200"):g.profilePic,alt:"Profile",className:"preview-image",onError:e=>{e.target.src="https://ui-avatars.com/api/?name=User&background=random&size=200"}}),(0,m.jsx)("small",{className:"form-text",children:v?"Auto-generated from your name":"Preview of your profile picture"})]}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:w.profile,children:w.profile?"Updating...":"Update Profile"})]})]}),(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("h2",{className:"section-title",children:"\ud83c\udfaf Savings Goals"}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=parseFloat(j),i=parseFloat(y);if(isNaN(a)||a<=0)d.oR.error("Please enter a valid monthly savings goal greater than 0");else if(a>9999999.99)d.oR.error("Monthly savings goal cannot exceed 9,999,999.99");else if(isNaN(i)||i<=0)d.oR.error("Please enter a valid all-time goal greater than 0");else if(i>9999999.99)d.oR.error("All-time goal cannot exceed 9,999,999.99");else{R((0,l.A)((0,l.A)({},w),{},{savings:!0}));try{const e=await c.Eo.updateBudget({savingsGoal:a,allTimeGoal:i});e.data&&e.data.data?(s({savingsGoal:e.data.data.savingsGoal,allTimeGoal:e.data.data.allTimeGoal}),d.oR.success("Savings goals updated successfully"),u&&setTimeout(()=>u(),500)):(s({savingsGoal:a,allTimeGoal:i}),d.oR.success("Savings goals updated successfully"),u&&setTimeout(()=>u(),500))}catch(t){var n;d.oR.error("Failed to update savings goals"),console.error("Update savings error:",t),console.error("Error response:",null===(n=t.response)||void 0===n?void 0:n.data)}finally{R((0,l.A)((0,l.A)({},w),{},{savings:!1}))}}},children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Monthly Savings Goal (\u20b9)"}),(0,m.jsx)("input",{type:"text",value:j,onChange:e=>{let s=e.target.value;s=s.replace(/[^\d.]/g,"");const a=s.split(".");if(a.length>2&&(s=a[0]+"."+a.slice(1).join("")),a[0]&&a[0].length>7&&(s=a[0].slice(0,7)+(a[1]?"."+a[1]:"")),a[1]&&a[1].length>2&&(s=a[0]+"."+a[1].slice(0,2)),""===s)N("");else{const e=parseFloat(s);N(isNaN(e)?"":e)}},className:"form-control",required:!0,inputMode:"decimal"}),(0,m.jsx)("small",{className:"form-text",children:"Set your monthly savings target (recommended: 20-50% of income). Max: 9,999,999.99"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"All Time Savings Goal (\u20b9)"}),(0,m.jsx)("input",{type:"text",value:y,onChange:e=>{let s=e.target.value;s=s.replace(/[^\d.]/g,"");const a=s.split(".");if(a.length>2&&(s=a[0]+"."+a.slice(1).join("")),a[0]&&a[0].length>7&&(s=a[0].slice(0,7)+(a[1]?"."+a[1]:"")),a[1]&&a[1].length>2&&(s=a[0]+"."+a[1].slice(0,2)),""===s)b("");else{const e=parseFloat(s);b(isNaN(e)?"":e)}},className:"form-control",required:!0,inputMode:"decimal"}),(0,m.jsx)("small",{className:"form-text",children:"Set your overall long-term savings target. Max: 9,999,999.99"})]}),(0,m.jsxs)("div",{className:"budget-info",children:[(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)("span",{className:"info-label",children:"Current Monthly Goal:"}),(0,m.jsxs)("span",{className:"info-value",children:["\u20b9",((null===e||void 0===e?void 0:e.savingsGoal)||0).toFixed(2)]})]}),(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)("span",{className:"info-label",children:"New Monthly Goal:"}),(0,m.jsxs)("span",{className:"info-value",children:["\u20b9",(Number(j)||0).toFixed(2)]})]}),(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)("span",{className:"info-label",children:"Current All Time Goal:"}),(0,m.jsxs)("span",{className:"info-value",children:["\u20b9",((null===e||void 0===e?void 0:e.allTimeGoal)||0).toFixed(2)]})]}),(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)("span",{className:"info-label",children:"New All Time Goal:"}),(0,m.jsxs)("span",{className:"info-value",children:["\u20b9",(Number(y)||0).toFixed(2)]})]})]}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:w.savings,children:w.savings?"Updating...":"Update Savings Goals"})]})]}),(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("h2",{className:"section-title",children:"\u2699\ufe0f App Preferences"}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),R((0,l.A)((0,l.A)({},w),{},{settings:!0}));try{await c.Eo.updateSettings(A),s(A),h(A.theme),d.oR.success("Settings updated successfully")}catch(a){d.oR.error("Failed to update settings"),console.error(a)}finally{R((0,l.A)((0,l.A)({},w),{},{settings:!1}))}},children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Assistant Personality"}),(0,m.jsxs)("select",{value:A.assistantPersonality,onChange:e=>P((0,l.A)((0,l.A)({},A),{},{assistantPersonality:e.target.value})),className:"form-select",children:[(0,m.jsx)("option",{value:"cheerful",children:"\ud83d\ude0a Cheerful - Enthusiastic and energetic"}),(0,m.jsx)("option",{value:"calm",children:"\ud83d\ude0c Calm - Balanced and encouraging"}),(0,m.jsx)("option",{value:"strict",children:"\ud83d\ude10 Strict - Direct and goal-focused"})]}),(0,m.jsx)("small",{className:"form-text",children:"Choose how your anime assistant interacts with you"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{className:"form-label",children:"Theme"}),(0,m.jsxs)("select",{value:A.theme,onChange:e=>{const s=e.target.value;P((0,l.A)((0,l.A)({},A),{},{theme:s})),h(s)},className:"form-select",children:[(0,m.jsx)("option",{value:"light",children:"\u2600\ufe0f Light Theme"}),(0,m.jsx)("option",{value:"dark",children:"\ud83c\udf19 Dark Theme"}),(0,m.jsx)("option",{value:"auto",children:"\ud83d\udd04 Auto (System)"})]}),(0,m.jsx)("small",{className:"form-text",children:"Select your preferred color scheme (changes instantly!)"})]}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:w.settings,children:w.settings?"Updating...":"Update Settings"})]})]}),"admin"!==(null===e||void 0===e?void 0:e.role)&&(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("h2",{className:"section-title",children:"\ud83d\udc51 Admin Access"}),null!==e&&void 0!==e&&e.adminRequestPending?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"alert alert-warning",style:{marginBottom:"1rem"},children:"\u23f3 Your admin request is pending approval from administrators."}),(0,m.jsx)("button",{className:"btn btn-secondary",onClick:async()=>{if(window.confirm("Cancel your admin request?"))try{await c.Eo.cancelAdminRequest(),d.oR.info("Admin request cancelled");const a=(0,l.A)((0,l.A)({},e),{},{adminRequestPending:!1});s(a)}catch(a){d.oR.error("Failed to cancel admin request"),console.error(a)}},children:"Cancel Request"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"info-text",children:"Request admin privileges to access advanced features like:"}),(0,m.jsxs)("ul",{className:"info-list",children:[(0,m.jsx)("li",{children:"View all users and system analytics"}),(0,m.jsx)("li",{children:"Approve admin access requests"}),(0,m.jsx)("li",{children:"Access admin dashboard"}),(0,m.jsx)("li",{children:"Manage system settings"})]}),(0,m.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(window.confirm("\ud83d\udc51 Request Admin Access?\n\nYour request will be sent to existing administrators for approval.\nYou will be notified once your request is reviewed."))try{await c.Eo.requestAdminAccess(),d.oR.success("Admin request sent! Waiting for approval from administrators.");const a=(0,l.A)((0,l.A)({},e),{},{adminRequestPending:!0});s(a)}catch(n){var a,i;d.oR.error((null===(a=n.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Failed to send admin request"),console.error(n)}},children:"\ud83d\udc51 Request Admin Access"})]})]}),(0,m.jsxs)("div",{className:"card danger-zone",children:[(0,m.jsx)("h2",{className:"section-title",children:"\ufffd\ufe0f Delete Account"}),(0,m.jsx)("p",{className:"warning-text",children:"\u26a0\ufe0f Warning: This action cannot be undone. Deleting your account will permanently remove:"}),(0,m.jsxs)("ul",{className:"warning-list",children:[(0,m.jsx)("li",{children:"All your transactions"}),(0,m.jsx)("li",{children:"Your profile and settings"}),(0,m.jsx)("li",{children:"All financial data and reports"})]}),(0,m.jsx)("button",{className:"btn btn-danger",onClick:async()=>{if(!window.confirm("\u26a0\ufe0f Are you absolutely sure you want to delete your account?\n\nThis will permanently delete:\n\u2022 All your transactions\n\u2022 Your profile and settings\n\u2022 All financial data and reports\n\nThis action CANNOT be undone!"))return;if("DELETE"===window.prompt('Type "DELETE" (in capitals) to confirm account deletion:'))try{await c.Eo.deleteAccount(),d.oR.success("Account deleted successfully"),a(),p("/login")}catch(e){d.oR.error("Failed to delete account"),console.error(e)}else d.oR.error("Account deletion cancelled")},children:"Delete My Account"})]})]})]})}}}]);
//# sourceMappingURL=592.0341d32f.chunk.js.map