"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[787],{8787:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(9379),n=t(5043),c=t(4505),l=t(4570),o=t(2145),r=t(5917),i=t(579);const d=["Salary","Freelance","Investment","Other"],m=["Food","Travel","Entertainment","Shopping","Healthcare","Education","Utilities","Rent","Other"],h=()=>{const{celebrate:e,shock:a,think:t,refreshProgress:h}=(0,l.w)(),[u,y]=(0,n.useState)([]),[x,p]=(0,n.useState)(!0),[j,b]=(0,n.useState)(!1),[N,g]=(0,n.useState)(null),[f,v]=(0,n.useState)({key:"date",direction:"desc"}),[k,w]=(0,n.useState)({type:"expense",category:m[0],amount:"",date:(0,r.A)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),note:""});(0,n.useEffect)(()=>{A()},[]);const A=async()=>{try{const e=await c.FU.getAll();y(e.data)}catch(e){o.oR.error("Failed to load transactions"),console.error(e)}finally{p(!1)}},C=e=>{const{name:a,value:t}=e.target;if("type"===a){const e="income"===t?d[0]:m[0];w(n=>(0,s.A)((0,s.A)({},n),{},{[a]:t,category:e}))}else w(e=>(0,s.A)((0,s.A)({},e),{},{[a]:t}))},T=e=>{let a="asc";f.key===e&&"asc"===f.direction&&(a="desc"),v({key:e,direction:a})},M=()=>{w({type:"expense",category:m[0],amount:"",date:(0,r.A)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),note:""}),g(null),b(!1)};return x?(0,i.jsx)("div",{className:"loading",children:(0,i.jsx)("div",{className:"spinner"})}):(0,i.jsxs)("div",{className:"transactions-page",children:[(0,i.jsxs)("div",{className:"page-header flex-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Transactions"}),(0,i.jsx)("p",{children:"Manage your income and expenses"})]}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:()=>{g(null),w({type:"expense",category:m[0],amount:"",date:(0,r.A)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),note:""}),b(!0)},children:"+ Add Transaction"})]}),(0,i.jsx)("div",{className:"card",children:u.length>0?(0,i.jsx)("div",{className:"table-responsive",children:(0,i.jsxs)("table",{className:"transactions-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsxs)("th",{onClick:()=>T("date"),className:"sortable",children:["Date ","date"===f.key&&("asc"===f.direction?"\u25b2":"\u25bc")]}),(0,i.jsxs)("th",{onClick:()=>T("type"),className:"sortable",children:["Type ","type"===f.key&&("asc"===f.direction?"\u25b2":"\u25bc")]}),(0,i.jsxs)("th",{onClick:()=>T("category"),className:"sortable",children:["Category ","category"===f.key&&("asc"===f.direction?"\u25b2":"\u25bc")]}),(0,i.jsxs)("th",{onClick:()=>T("amount"),className:"sortable",children:["Amount ","amount"===f.key&&("asc"===f.direction?"\u25b2":"\u25bc")]}),(0,i.jsx)("th",{children:"Note"}),(0,i.jsx)("th",{children:"Actions"})]})}),(0,i.jsx)("tbody",{children:[...u].sort((e,a)=>{let t,s;switch(f.key){case"date":t=new Date(e.date),s=new Date(a.date);break;case"type":t=e.type,s=a.type;break;case"category":t=e.category,s=a.category;break;case"amount":t=e.amount,s=a.amount;break;default:return 0}return t<s?"asc"===f.direction?-1:1:t>s?"asc"===f.direction?1:-1:0}).map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("div",{children:(0,r.A)(new Date(e.date),"MMM dd, yyyy")}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:(0,r.A)(new Date(e.date),"HH:mm:ss")})]}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{className:"badge ".concat(e.type),children:e.type})}),(0,i.jsx)("td",{children:e.category}),(0,i.jsxs)("td",{className:"amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]}),(0,i.jsx)("td",{children:e.note||"-"}),(0,i.jsx)("td",{children:(0,i.jsxs)("div",{className:"action-buttons",children:[(0,i.jsx)("button",{className:"btn-action edit",onClick:()=>(e=>{g(e),w({type:e.type,category:e.category,amount:e.amount.toString(),date:(0,r.A)(new Date(e.date),"yyyy-MM-dd'T'HH:mm:ss"),note:e.note||""}),b(!0)})(e),children:"\u270f\ufe0f"}),(0,i.jsx)("button",{className:"btn-action delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await c.FU.delete(e),o.oR.success("Transaction deleted successfully"),A(),h&&setTimeout(()=>h(),500)}catch(a){o.oR.error("Failed to delete transaction"),console.error(a)}})(e._id),children:"\ud83d\uddd1\ufe0f"})]})})]},e._id))})]})}):(0,i.jsx)("div",{className:"empty-state",children:(0,i.jsx)("p",{children:"No transactions yet. Add your first transaction!"})})}),j&&(0,i.jsx)("div",{className:"modal-overlay",onClick:M,children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h2",{children:N?"Edit Transaction":"Add Transaction"}),(0,i.jsx)("button",{className:"btn-close",onClick:M,children:"\u2715"})]}),(0,i.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const n=parseFloat(k.amount);if(isNaN(n)||n<=0)o.oR.error("Please enter a valid amount greater than 0");else if(n>9999999.99)o.oR.error("Amount cannot exceed 9,999,999.99");else{t();try{N?(await c.FU.update(N._id,k),o.oR.success("Transaction updated successfully")):(await c.FU.create(k),o.oR.success("Transaction added successfully"),"income"===k.type?e():parseFloat(k.amount)>1e3&&a()),A(),M(),h&&setTimeout(()=>h(),500)}catch(l){o.oR.error("Failed to save transaction"),console.error(l)}}},className:"transaction-form",children:[(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Type"}),(0,i.jsxs)("select",{name:"type",value:k.type,onChange:C,className:"form-select",children:[(0,i.jsx)("option",{value:"income",children:"Income"}),(0,i.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Category"}),(0,i.jsx)("select",{name:"category",value:k.category,onChange:C,className:"form-select",children:("income"===k.type?d:m).map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})]}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Amount"}),(0,i.jsx)("input",{type:"text",name:"amount",value:k.amount,onChange:e=>{let a=e.target.value;a=a.replace(/[^\d.]/g,"");const t=a.split(".");t.length>2&&(a=t[0]+"."+t.slice(1).join("")),t[0]&&t[0].length>7&&(a=t[0].slice(0,7)+(t[1]?"."+t[1]:"")),t[1]&&t[1].length>2&&(a=t[0]+"."+t[1].slice(0,2)),w(e=>(0,s.A)((0,s.A)({},e),{},{amount:a}))},className:"form-control",placeholder:"0.00",required:!0,inputMode:"decimal"}),(0,i.jsx)("small",{className:"form-text",style:{fontSize:"12px",color:"#888"},children:"\ud83d\udcb0 Maximum: 9,999,999.99"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Date & Time"}),(0,i.jsx)("input",{type:"datetime-local",name:"date",value:k.date,onChange:C,className:"form-control",step:"1",required:!0}),(0,i.jsx)("small",{className:"form-text",style:{fontSize:"12px",color:"#888"},children:"\u23f0 Auto-filled with current time. Click to change manually."})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Note (optional)"}),(0,i.jsx)("textarea",{name:"note",value:k.note,onChange:C,className:"form-control",rows:"3",placeholder:"Add a note..."})]}),(0,i.jsxs)("div",{className:"modal-actions",children:[(0,i.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:M,children:"Cancel"}),(0,i.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[N?"Update":"Add"," Transaction"]})]})]})]})})]})}}}]);
//# sourceMappingURL=787.5069d04f.chunk.js.map