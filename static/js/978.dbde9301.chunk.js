"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[978],{1978:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(5043),n=s(4505),c=s(4570),o=s(2145),l=s(5917),r=s(579);const i=()=>{const{refreshProgress:e}=(0,c.w)(),[t,s]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0),[m,h]=(0,a.useState)("current-month"),[x,u]=(0,a.useState)((new Date).getMonth()+1),[p,j]=(0,a.useState)((new Date).getFullYear()),g=(0,a.useCallback)(async()=>{d(!0);try{if("all-time"===m){const e=(await n.FU.getAll()).data,t=e.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),a=e.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),c=t-a,o={};e.filter(e=>"expense"===e.type).forEach(e=>{o[e.category]=(o[e.category]||0)+e.amount});const l=2e4,r=c,i=t>0?r/t*100:0,d=[];r>=l?d.push("Excellent! You saved \u20b9".concat(r.toFixed(2),", exceeding your goal by \u20b9").concat((r-l).toFixed(2))):r>0?d.push("You saved \u20b9".concat(r.toFixed(2)," (").concat(i.toFixed(2),"% of income)")):r<0&&d.push("Warning: You spent \u20b9".concat(Math.abs(r).toFixed(2)," more than you earned"));const m=Object.entries(o).sort((e,t)=>t[1]-e[1])[0];m&&d.push("Your highest expense category is ".concat(m[0]," (\u20b9").concat(m[1].toFixed(2),")")),s({period:{display:"All Time"},summary:{totalIncome:t,totalExpenses:a,balance:c,savingsGoal:l,savings:r,savingsPercentage:i},categoryBreakdown:o,insights:d,transactions:e,transactionCount:{income:e.filter(e=>"income"===e.type).length,expense:e.filter(e=>"expense"===e.type).length,total:e.length}})}else{const e=await n.Pt.getSummary({month:x,year:p});s(e.data)}}catch(e){o.oR.error("Failed to load summary"),console.error(e)}finally{d(!1)}},[m,x,p]);(0,a.useEffect)(()=>{g(),e&&setTimeout(()=>e(),500)},[g]);const y=async()=>{var e,s,a;const c="all-time"===m?"All Time":"".concat(new Date(2e3,x-1,1).toLocaleString("default",{month:"long"})," ").concat(p),l=(null===t||void 0===t||null===(e=t.transactionCount)||void 0===e?void 0:e.total)||0;if(window.confirm("\ud83d\udcca Export CSV Report\n\n"+"Period: ".concat(c,"\n")+"Transactions: ".concat(l,"\n")+"Income: \u20b9".concat(((null===t||void 0===t||null===(s=t.summary)||void 0===s?void 0:s.totalIncome)||0).toFixed(2),"\n")+"Expenses: \u20b9".concat(((null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.totalExpenses)||0).toFixed(2),"\n\n")+"Do you want to proceed with the export?"))try{if("all-time"===m){const e=await n.Pt.exportCSV({}),t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","transactions_all_time.csv"),document.body.appendChild(s),s.click(),s.remove()}else{const e=await n.Pt.exportCSV({month:x,year:p}),t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","transactions_".concat(x,"_").concat(p,".csv")),document.body.appendChild(s),s.click(),s.remove()}o.oR.success("CSV exported successfully")}catch(r){o.oR.error("Failed to export CSV"),console.error(r)}else o.oR.info("Export cancelled")},v=async()=>{var e,s,a;const c="all-time"===m?"All Time":"".concat(new Date(2e3,x-1,1).toLocaleString("default",{month:"long"})," ").concat(p),l=(null===t||void 0===t||null===(e=t.transactionCount)||void 0===e?void 0:e.total)||0;if(window.confirm("\ud83d\udcc4 Export PDF Report\n\n"+"Period: ".concat(c,"\n")+"Transactions: ".concat(l,"\n")+"Income: \u20b9".concat(((null===t||void 0===t||null===(s=t.summary)||void 0===s?void 0:s.totalIncome)||0).toFixed(2),"\n")+"Expenses: \u20b9".concat(((null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.totalExpenses)||0).toFixed(2),"\n\n")+"Do you want to proceed with the export?"))try{if("all-time"===m){const e=await n.Pt.exportPDF({}),t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","transactions_all_time.pdf"),document.body.appendChild(s),s.click(),s.remove()}else{const e=await n.Pt.exportPDF({month:x,year:p}),t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download","transactions_".concat(x,"_").concat(p,".pdf")),document.body.appendChild(s),s.click(),s.remove()}o.oR.success("PDF exported successfully")}catch(r){o.oR.error("Failed to export PDF"),console.error(r)}else o.oR.info("Export cancelled")};if(i)return(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("div",{className:"spinner"})});if(!t)return(0,r.jsx)("div",{className:"container",children:"No data available"});const{totalIncome:b,totalExpenses:N,balance:w}=t.summary,{categoryBreakdown:f,insights:F,transactions:C=[]}=t;return(0,r.jsxs)("div",{className:"reports-page",children:[(0,r.jsxs)("div",{className:"page-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Financial Reports"}),(0,r.jsx)("p",{children:"View your financial summaries and export data"})]}),(0,r.jsxs)("div",{className:"view-toggle",children:[(0,r.jsx)("button",{className:"toggle-btn ".concat("current-month"===m?"active":""),onClick:()=>h("current-month"),children:"\ud83d\udcc5 This Month"}),(0,r.jsx)("button",{className:"toggle-btn ".concat("all-time"===m?"active":""),onClick:()=>h("all-time"),children:"\ud83c\udf0d All Time"})]})]}),"current-month"===m&&(0,r.jsx)("div",{className:"card mb-4",children:(0,r.jsxs)("div",{className:"period-selector",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Month"}),(0,r.jsx)("select",{value:x,onChange:e=>u(parseInt(e.target.value)),className:"form-select",children:Array.from({length:12},(e,t)=>(0,r.jsx)("option",{value:t+1,children:new Date(2e3,t,1).toLocaleString("default",{month:"long"})},t+1))})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Year"}),(0,r.jsx)("select",{value:p,onChange:e=>j(parseInt(e.target.value)),className:"form-select",children:Array.from({length:5},(e,t)=>{const s=(new Date).getFullYear()-t;return(0,r.jsx)("option",{value:s,children:s},s)})})]}),(0,r.jsxs)("div",{className:"export-buttons",children:[(0,r.jsx)("button",{className:"btn btn-outline",onClick:y,children:"\ud83d\udcca Export CSV"}),(0,r.jsx)("button",{className:"btn btn-outline",onClick:v,children:"\ud83d\udcc4 Export PDF"})]})]})}),"all-time"===m&&(0,r.jsx)("div",{className:"card mb-4",children:(0,r.jsxs)("div",{className:"export-buttons-fullwidth",children:[(0,r.jsx)("button",{className:"btn btn-outline",onClick:y,children:"\ud83d\udcca Export CSV (All Time)"}),(0,r.jsx)("button",{className:"btn btn-outline",onClick:v,children:"\ud83d\udcc4 Export PDF (All Time)"})]})}),(0,r.jsxs)("div",{className:"grid grid-3 mb-4",children:[(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("h3",{children:"Total Income"}),(0,r.jsxs)("p",{className:"amount income",children:["\u20b9",b.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("h3",{children:"Total Expenses"}),(0,r.jsxs)("p",{className:"amount expense",children:["\u20b9",N.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"summary-card",children:[(0,r.jsx)("h3",{children:"Net Balance"}),(0,r.jsxs)("p",{className:"amount ".concat(w>=0?"income":"expense"),children:["\u20b9",w.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"Expense Breakdown by Category"}),Object.keys(f).length>0?(0,r.jsx)("div",{className:"category-list",children:Object.entries(f).sort((e,t)=>t[1]-e[1]).map(e=>{let[t,s]=e;const a=(s/N*100).toFixed(1);return(0,r.jsxs)("div",{className:"category-item",children:[(0,r.jsxs)("div",{className:"category-header",children:[(0,r.jsx)("span",{className:"category-name",children:t}),(0,r.jsxs)("span",{className:"category-amount",children:["\u20b9",s.toFixed(2)]})]}),(0,r.jsx)("div",{className:"category-bar",children:(0,r.jsx)("div",{className:"category-fill",style:{width:"".concat(a,"%")}})}),(0,r.jsxs)("span",{className:"category-percentage",children:[a,"%"]})]},t)})}):(0,r.jsx)("p",{className:"text-center",children:"No expense data for this period"})]}),F.length>0&&(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"\ud83d\udca1 Financial Insights"}),(0,r.jsx)("ul",{className:"insights-list",children:F.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]}),(0,r.jsxs)("div",{className:"card transactions-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsx)("h3",{className:"card-title",children:"\ud83d\udccb Transaction Details"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>window.print(),children:"\ud83d\udda8\ufe0f Print Report"})]}),C.length>0?(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"transactions-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Date"}),(0,r.jsx)("th",{children:"Type"}),(0,r.jsx)("th",{children:"Category"}),(0,r.jsx)("th",{children:"Amount"}),(0,r.jsx)("th",{children:"Note"})]})}),(0,r.jsx)("tbody",{children:C.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[(0,r.jsx)("div",{children:(0,l.A)(new Date(e.date),"MMM dd, yyyy")}),(0,r.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:(0,l.A)(new Date(e.date),"HH:mm")})]}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"badge ".concat(e.type),children:e.type})}),(0,r.jsx)("td",{children:e.category}),(0,r.jsxs)("td",{className:"amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]}),(0,r.jsx)("td",{children:e.note||"-"})]},e._id))}),(0,r.jsxs)("tfoot",{children:[(0,r.jsxs)("tr",{className:"total-row",children:[(0,r.jsx)("td",{colspan:"3",children:(0,r.jsx)("strong",{children:"Total"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("strong",{className:"amount income",children:["+\u20b9",b.toFixed(2)]})}),(0,r.jsx)("td",{})]}),(0,r.jsxs)("tr",{className:"total-row",children:[(0,r.jsx)("td",{colspan:"3",children:(0,r.jsx)("strong",{children:"Total Expenses"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("strong",{className:"amount expense",children:["-\u20b9",N.toFixed(2)]})}),(0,r.jsx)("td",{})]}),(0,r.jsxs)("tr",{className:"total-row highlight",children:[(0,r.jsx)("td",{colspan:"3",children:(0,r.jsx)("strong",{children:"Net Balance"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("strong",{className:"amount ".concat(w>=0?"income":"expense"),children:["\u20b9",w.toFixed(2)]})}),(0,r.jsx)("td",{})]})]})]})}):(0,r.jsx)("p",{className:"text-center",children:"No transactions for this period"})]})]})}}}]);
//# sourceMappingURL=978.dbde9301.chunk.js.map